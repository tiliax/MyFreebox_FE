{"ast":null,"code":"\"use strict\";\n/*\n * $asyncbind has multiple uses, depending on the parameter list. It is in Function.prototype, so 'this' is always a function\n *\n * 1) If called with a single argument (this), it is used when defining an async function to ensure when\n *      it is invoked, the correct 'this' is present, just like \"bind\". For legacy reasons, 'this' is given\n *      a memeber 'then' which refers to itself.\n * 2) If called with a second parameter (\"catcher\") and catcher!==true it is being used to invoke an async\n *      function where the second parameter is the error callback (for sync exceptions and to be passed to\n *      nested async calls)\n * 3) If called with the second parameter===true, it is the same use as (1), but the function is wrapped\n *      in an 'Promise' as well bound to 'this'.\n *      It is the same as calling 'new Promise(this)', where 'this' is the function being bound/wrapped\n * 4) If called with the second parameter===0, it is the same use as (1), but the function is wrapped\n *      in a 'LazyThenable', which executes lazily and can resolve synchronously.\n *      It is the same as calling 'new LazyThenable(this)' (if such a type were exposed), where 'this' is\n *      the function being bound/wrapped\n */\n\nfunction processIncludes(includes, input) {\n  var src = input.toString();\n  var t = \"return \" + src;\n  var args = src.match(/.*\\(([^)]*)\\)/)[1];\n  var re = /['\"]!!!([^'\"]*)['\"]/g;\n  var m = [];\n\n  while (1) {\n    var mx = re.exec(t);\n    if (mx) m.push(mx);else break;\n  }\n\n  m.reverse().forEach(function (e) {\n    t = t.slice(0, e.index) + includes[e[1]] + t.substr(e.index + e[0].length);\n  });\n  t = t.replace(/\\/\\*[^*]*\\*\\//g, ' ').replace(/\\s+/g, ' ');\n  return new Function(args, t)();\n}\n\nvar $asyncbind = processIncludes({\n  zousan: require('./zousan').toString(),\n  thenable: require('./thenableFactory').toString()\n}, function $asyncbind(self, catcher) {\n  \"use strict\";\n\n  if (!Function.prototype.$asyncbind) {\n    Object.defineProperty(Function.prototype, \"$asyncbind\", {\n      value: $asyncbind,\n      enumerable: false,\n      configurable: true,\n      writable: true\n    });\n  }\n\n  if (!$asyncbind.trampoline) {\n    $asyncbind.trampoline = function trampoline(t, x, s, e, u) {\n      return function b(q) {\n        while (q) {\n          if (q.then) {\n            q = q.then(b, e);\n            return u ? undefined : q;\n          }\n\n          try {\n            if (q.pop) {\n              if (q.length) return q.pop() ? x.call(t) : q;\n              q = s;\n            } else q = q.call(t);\n          } catch (r) {\n            return e(r);\n          }\n        }\n      };\n    };\n  }\n\n  if (!$asyncbind.LazyThenable) {\n    $asyncbind.LazyThenable = '!!!thenable'();\n    $asyncbind.EagerThenable = $asyncbind.Thenable = ($asyncbind.EagerThenableFactory = '!!!zousan')();\n  }\n\n  function boundThen() {\n    return resolver.apply(self, arguments);\n  }\n\n  var resolver = this;\n\n  switch (catcher) {\n    case true:\n      return new $asyncbind.Thenable(boundThen);\n\n    case 0:\n      return new $asyncbind.LazyThenable(boundThen);\n\n    case undefined:\n      /* For runtime compatibility with Nodent v2.x, provide a thenable */\n      boundThen.then = boundThen;\n      return boundThen;\n\n    default:\n      return function () {\n        try {\n          return resolver.apply(self, arguments);\n        } catch (ex) {\n          return catcher(ex);\n        }\n      };\n  }\n});\n\nfunction $asyncspawn(promiseProvider, self) {\n  if (!Function.prototype.$asyncspawn) {\n    Object.defineProperty(Function.prototype, \"$asyncspawn\", {\n      value: $asyncspawn,\n      enumerable: false,\n      configurable: true,\n      writable: true\n    });\n  }\n\n  if (!(this instanceof Function)) return;\n  var genF = this;\n  return new promiseProvider(function enough(resolve, reject) {\n    var gen = genF.call(self, resolve, reject);\n\n    function step(fn, arg) {\n      var next;\n\n      try {\n        next = fn.call(gen, arg);\n\n        if (next.done) {\n          if (next.value !== resolve) {\n            if (next.value && next.value === next.value.then) return next.value(resolve, reject);\n            resolve && resolve(next.value);\n            resolve = null;\n          }\n\n          return;\n        }\n\n        if (next.value.then) {\n          next.value.then(function (v) {\n            step(gen.next, v);\n          }, function (e) {\n            step(gen.throw, e);\n          });\n        } else {\n          step(gen.next, next.value);\n        }\n      } catch (e) {\n        reject && reject(e);\n        reject = null;\n        return;\n      }\n    }\n\n    step(gen.next);\n  });\n} // Initialize async bindings\n\n\n$asyncbind();\n$asyncspawn(); // Export async bindings\n\nmodule.exports = {\n  $asyncbind: $asyncbind,\n  $asyncspawn: $asyncspawn\n};","map":{"version":3,"names":["processIncludes","includes","input","src","toString","t","args","match","re","m","mx","exec","push","reverse","forEach","e","slice","index","substr","length","replace","Function","$asyncbind","zousan","require","thenable","self","catcher","prototype","Object","defineProperty","value","enumerable","configurable","writable","trampoline","x","s","u","b","q","then","undefined","pop","call","r","LazyThenable","EagerThenable","Thenable","EagerThenableFactory","boundThen","resolver","apply","arguments","ex","$asyncspawn","promiseProvider","genF","enough","resolve","reject","gen","step","fn","arg","next","done","v","throw","module","exports"],"sources":["C:/Users/Larix/Documents/Programmieren/ABSCHLUSS/wbs-final-box-fe/node_modules/nodent-runtime/runtime.js"],"sourcesContent":["\"use strict\";\n/*\n * $asyncbind has multiple uses, depending on the parameter list. It is in Function.prototype, so 'this' is always a function\n *\n * 1) If called with a single argument (this), it is used when defining an async function to ensure when\n *      it is invoked, the correct 'this' is present, just like \"bind\". For legacy reasons, 'this' is given\n *      a memeber 'then' which refers to itself.\n * 2) If called with a second parameter (\"catcher\") and catcher!==true it is being used to invoke an async\n *      function where the second parameter is the error callback (for sync exceptions and to be passed to\n *      nested async calls)\n * 3) If called with the second parameter===true, it is the same use as (1), but the function is wrapped\n *      in an 'Promise' as well bound to 'this'.\n *      It is the same as calling 'new Promise(this)', where 'this' is the function being bound/wrapped\n * 4) If called with the second parameter===0, it is the same use as (1), but the function is wrapped\n *      in a 'LazyThenable', which executes lazily and can resolve synchronously.\n *      It is the same as calling 'new LazyThenable(this)' (if such a type were exposed), where 'this' is\n *      the function being bound/wrapped\n */\n\nfunction processIncludes(includes,input) {\n    var src = input.toString() ;\n    var t = \"return \"+src ;\n    var args = src.match(/.*\\(([^)]*)\\)/)[1] ;\n    var re = /['\"]!!!([^'\"]*)['\"]/g ;\n    var m = [] ;\n    while (1) {\n        var mx = re.exec(t) ;\n        if (mx)\n            m.push(mx) ;\n        else break ;\n    }\n    m.reverse().forEach(function(e){\n        t = t.slice(0,e.index)+includes[e[1]]+t.substr(e.index+e[0].length) ;\n    }) ;\n    t = t.replace(/\\/\\*[^*]*\\*\\//g,' ').replace(/\\s+/g,' ') ;\n    return new Function(args,t)() ;\n}\n\nvar $asyncbind = processIncludes({\n    zousan:require('./zousan').toString(),\n    thenable:require('./thenableFactory').toString()\n},\nfunction $asyncbind(self,catcher) {\n    \"use strict\";\n    if (!Function.prototype.$asyncbind) {\n        Object.defineProperty(Function.prototype,\"$asyncbind\",{value:$asyncbind,enumerable:false,configurable:true,writable:true}) ;\n    }\n\n    if (!$asyncbind.trampoline) {\n      $asyncbind.trampoline = function trampoline(t,x,s,e,u){\n        return function b(q) {\n                while (q) {\n                    if (q.then) {\n                        q = q.then(b, e) ;\n                        return u?undefined:q;\n                    }\n                    try {\n                        if (q.pop) {\n                            if (q.length)\n                              return q.pop() ? x.call(t) : q;\n                            q = s;\n                         } else\n                            q = q.call(t)\n                    } catch (r) {\n                        return e(r);\n                    }\n                }\n            }\n        };\n    }\n    if (!$asyncbind.LazyThenable) {\n        $asyncbind.LazyThenable = '!!!thenable'();\n        $asyncbind.EagerThenable = $asyncbind.Thenable = ($asyncbind.EagerThenableFactory = '!!!zousan')();\n    }\n\n    function boundThen() {\n        return resolver.apply(self,arguments);\n    }\n\n    var resolver = this;\n    switch (catcher) {\n    case true:\n        return new ($asyncbind.Thenable)(boundThen);\n    case 0:\n        return new ($asyncbind.LazyThenable)(boundThen);\n    case undefined:\n        /* For runtime compatibility with Nodent v2.x, provide a thenable */\n        boundThen.then = boundThen ;\n        return boundThen ;\n    default:\n        return function(){\n            try {\n                return resolver.apply(self,arguments);\n            } catch(ex) {\n                return catcher(ex);\n            }\n        }\n    }\n\n}) ;\n\nfunction $asyncspawn(promiseProvider,self) {\n    if (!Function.prototype.$asyncspawn) {\n        Object.defineProperty(Function.prototype,\"$asyncspawn\",{value:$asyncspawn,enumerable:false,configurable:true,writable:true}) ;\n    }\n    if (!(this instanceof Function)) return ;\n\n    var genF = this ;\n    return new promiseProvider(function enough(resolve, reject) {\n        var gen = genF.call(self, resolve, reject);\n        function step(fn,arg) {\n            var next;\n            try {\n                next = fn.call(gen,arg);\n                if(next.done) {\n                    if (next.value !== resolve) {\n                        if (next.value && next.value===next.value.then)\n                            return next.value(resolve,reject) ;\n                        resolve && resolve(next.value);\n                        resolve = null ;\n                    }\n                    return;\n                }\n\n                if (next.value.then) {\n                    next.value.then(function(v) {\n                        step(gen.next,v);\n                    }, function(e) {\n                        step(gen.throw,e);\n                    });\n                } else {\n                    step(gen.next,next.value);\n                }\n            } catch(e) {\n                reject && reject(e);\n                reject = null ;\n                return;\n            }\n        }\n        step(gen.next);\n    });\n}\n\n// Initialize async bindings\n$asyncbind() ;\n$asyncspawn() ;\n\n// Export async bindings\nmodule.exports = {\n    $asyncbind:$asyncbind,\n    $asyncspawn:$asyncspawn\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}