{"ast":null,"code":"import { latLng, latLngBounds, LatLng, LatLngBounds, Util, DomUtil, GeoJSON } from 'leaflet';\nimport { request, warn } from './Request';\nimport { options } from './Options';\nimport { Support } from './Support';\nimport { geojsonToArcGIS as g2a, arcgisToGeoJSON as a2g } from '@terraformer/arcgis';\nvar BASE_LEAFLET_ATTRIBUTION_STRING = '<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>';\nvar POWERED_BY_ESRI_ATTRIBUTION_STRING = 'Powered by <a href=\"https://www.esri.com\">Esri</a>';\nexport function geojsonToArcGIS(geojson, idAttr) {\n  return g2a(geojson, idAttr);\n}\nexport function arcgisToGeoJSON(arcgis, idAttr) {\n  return a2g(arcgis, idAttr);\n} // convert an extent (ArcGIS) to LatLngBounds (Leaflet)\n\nexport function extentToBounds(extent) {\n  // \"NaN\" coordinates from ArcGIS Server indicate a null geometry\n  if (extent.xmin !== 'NaN' && extent.ymin !== 'NaN' && extent.xmax !== 'NaN' && extent.ymax !== 'NaN') {\n    var sw = latLng(extent.ymin, extent.xmin);\n    var ne = latLng(extent.ymax, extent.xmax);\n    return latLngBounds(sw, ne);\n  } else {\n    return null;\n  }\n} // convert an LatLngBounds (Leaflet) to extent (ArcGIS)\n\nexport function boundsToExtent(bounds) {\n  bounds = latLngBounds(bounds);\n  return {\n    xmin: bounds.getSouthWest().lng,\n    ymin: bounds.getSouthWest().lat,\n    xmax: bounds.getNorthEast().lng,\n    ymax: bounds.getNorthEast().lat,\n    spatialReference: {\n      wkid: 4326\n    }\n  };\n}\nvar knownFieldNames = /^(OBJECTID|FID|OID|ID)$/i; // Attempts to find the ID Field from response\n\nexport function _findIdAttributeFromResponse(response) {\n  var result;\n\n  if (response.objectIdFieldName) {\n    // Find Id Field directly\n    result = response.objectIdFieldName;\n  } else if (response.fields) {\n    // Find ID Field based on field type\n    for (var j = 0; j <= response.fields.length - 1; j++) {\n      if (response.fields[j].type === 'esriFieldTypeOID') {\n        result = response.fields[j].name;\n        break;\n      }\n    }\n\n    if (!result) {\n      // If no field was marked as being the esriFieldTypeOID try well known field names\n      for (j = 0; j <= response.fields.length - 1; j++) {\n        if (response.fields[j].name.match(knownFieldNames)) {\n          result = response.fields[j].name;\n          break;\n        }\n      }\n    }\n  }\n\n  return result;\n} // This is the 'last' resort, find the Id field from the specified feature\n\nexport function _findIdAttributeFromFeature(feature) {\n  for (var key in feature.attributes) {\n    if (key.match(knownFieldNames)) {\n      return key;\n    }\n  }\n}\nexport function responseToFeatureCollection(response, idAttribute) {\n  var objectIdField;\n  var features = response.features || response.results;\n  var count = features && features.length;\n\n  if (idAttribute) {\n    objectIdField = idAttribute;\n  } else {\n    objectIdField = _findIdAttributeFromResponse(response);\n  }\n\n  var featureCollection = {\n    type: 'FeatureCollection',\n    features: []\n  };\n\n  if (count) {\n    for (var i = features.length - 1; i >= 0; i--) {\n      var feature = arcgisToGeoJSON(features[i], objectIdField || _findIdAttributeFromFeature(features[i]));\n      featureCollection.features.push(feature);\n    }\n  }\n\n  return featureCollection;\n} // trim url whitespace and add a trailing slash if needed\n\nexport function cleanUrl(url) {\n  // trim leading and trailing spaces, but not spaces inside the url\n  url = Util.trim(url); // add a trailing slash to the url if the user omitted it\n\n  if (url[url.length - 1] !== '/') {\n    url += '/';\n  }\n\n  return url;\n}\n/* Extract url params if any and store them in requestParams attribute.\r\n   Return the options params updated */\n\nexport function getUrlParams(options) {\n  if (options.url.indexOf('?') !== -1) {\n    options.requestParams = options.requestParams || {};\n    var queryString = options.url.substring(options.url.indexOf('?') + 1);\n    options.url = options.url.split('?')[0];\n    options.requestParams = JSON.parse('{\"' + decodeURI(queryString).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\n  }\n\n  options.url = cleanUrl(options.url.split('?')[0]);\n  return options;\n}\nexport function isArcgisOnline(url) {\n  /* hosted feature services support geojson as an output format\r\n  utility.arcgis.com services are proxied from a variety of ArcGIS Server vintages, and may not */\n  return /^(?!.*utility\\.arcgis\\.com).*\\.arcgis\\.com.*FeatureServer/i.test(url);\n}\nexport function geojsonTypeToArcGIS(geoJsonType) {\n  var arcgisGeometryType;\n\n  switch (geoJsonType) {\n    case 'Point':\n      arcgisGeometryType = 'esriGeometryPoint';\n      break;\n\n    case 'MultiPoint':\n      arcgisGeometryType = 'esriGeometryMultipoint';\n      break;\n\n    case 'LineString':\n      arcgisGeometryType = 'esriGeometryPolyline';\n      break;\n\n    case 'MultiLineString':\n      arcgisGeometryType = 'esriGeometryPolyline';\n      break;\n\n    case 'Polygon':\n      arcgisGeometryType = 'esriGeometryPolygon';\n      break;\n\n    case 'MultiPolygon':\n      arcgisGeometryType = 'esriGeometryPolygon';\n      break;\n  }\n\n  return arcgisGeometryType;\n}\nexport function calcAttributionWidth(map) {\n  // either crop at 55px or user defined buffer\n  return map.getSize().x - options.attributionWidthOffset + 'px';\n}\nexport function setEsriAttribution(map) {\n  if (!map.attributionControl) {\n    return;\n  }\n\n  if (!map.attributionControl._esriAttributionLayerCount) {\n    map.attributionControl._esriAttributionLayerCount = 0;\n  }\n\n  if (map.attributionControl._esriAttributionLayerCount === 0) {\n    // Dynamically creating the CSS rules, only run this once per page load:\n    if (!map.attributionControl._esriAttributionAddedOnce) {\n      var hoverAttributionStyle = document.createElement('style');\n      hoverAttributionStyle.type = 'text/css';\n      hoverAttributionStyle.innerHTML = '.esri-truncated-attribution:hover {' + 'white-space: normal;' + '}';\n      document.getElementsByTagName('head')[0].appendChild(hoverAttributionStyle); // define a new css class in JS to trim attribution into a single line\n\n      var attributionStyle = document.createElement('style');\n      attributionStyle.type = 'text/css';\n      attributionStyle.innerHTML = '.esri-truncated-attribution {' + 'vertical-align: -3px;' + 'white-space: nowrap;' + 'overflow: hidden;' + 'text-overflow: ellipsis;' + 'display: inline-block;' + 'transition: 0s white-space;' + 'transition-delay: 1s;' + 'max-width: ' + calcAttributionWidth(map) + ';' + '}';\n      document.getElementsByTagName('head')[0].appendChild(attributionStyle); // update the width used to truncate when the map itself is resized\n\n      map.on('resize', function (e) {\n        if (map.attributionControl) {\n          map.attributionControl._container.style.maxWidth = calcAttributionWidth(e.target);\n        }\n      });\n      map.attributionControl._esriAttributionAddedOnce = true;\n    }\n\n    map.attributionControl.setPrefix(BASE_LEAFLET_ATTRIBUTION_STRING + ' | ' + POWERED_BY_ESRI_ATTRIBUTION_STRING);\n    DomUtil.addClass(map.attributionControl._container, 'esri-truncated-attribution:hover');\n    DomUtil.addClass(map.attributionControl._container, 'esri-truncated-attribution');\n  } // Track the number of esri-leaflet layers that are on the map so we can know when we can remove the attribution (below in removeEsriAttribution)\n\n\n  map.attributionControl._esriAttributionLayerCount = map.attributionControl._esriAttributionLayerCount + 1;\n}\nexport function removeEsriAttribution(map) {\n  if (!map.attributionControl) {\n    return;\n  } // Only remove the attribution if we're about to remove the LAST esri-leaflet layer (_esriAttributionLayerCount)\n\n\n  if (map.attributionControl._esriAttributionLayerCount && map.attributionControl._esriAttributionLayerCount === 1) {\n    map.attributionControl.setPrefix(BASE_LEAFLET_ATTRIBUTION_STRING);\n    DomUtil.removeClass(map.attributionControl._container, 'esri-truncated-attribution:hover');\n    DomUtil.removeClass(map.attributionControl._container, 'esri-truncated-attribution');\n  }\n\n  map.attributionControl._esriAttributionLayerCount = map.attributionControl._esriAttributionLayerCount - 1;\n}\nexport function _setGeometry(geometry) {\n  var params = {\n    geometry: null,\n    geometryType: null\n  }; // convert bounds to extent and finish\n\n  if (geometry instanceof LatLngBounds) {\n    // set geometry + geometryType\n    params.geometry = boundsToExtent(geometry);\n    params.geometryType = 'esriGeometryEnvelope';\n    return params;\n  } // convert L.Marker > L.LatLng\n\n\n  if (geometry.getLatLng) {\n    geometry = geometry.getLatLng();\n  } // convert L.LatLng to a geojson point and continue;\n\n\n  if (geometry instanceof LatLng) {\n    geometry = {\n      type: 'Point',\n      coordinates: [geometry.lng, geometry.lat]\n    };\n  } // handle L.GeoJSON, pull out the first geometry\n\n\n  if (geometry instanceof GeoJSON) {\n    // reassign geometry to the GeoJSON value  (we are assuming that only one feature is present)\n    geometry = geometry.getLayers()[0].feature.geometry;\n    params.geometry = geojsonToArcGIS(geometry);\n    params.geometryType = geojsonTypeToArcGIS(geometry.type);\n  } // Handle L.Polyline and L.Polygon\n\n\n  if (geometry.toGeoJSON) {\n    geometry = geometry.toGeoJSON();\n  } // handle GeoJSON feature by pulling out the geometry\n\n\n  if (geometry.type === 'Feature') {\n    // get the geometry of the geojson feature\n    geometry = geometry.geometry;\n  } // confirm that our GeoJSON is a point, line or polygon\n\n\n  if (geometry.type === 'Point' || geometry.type === 'LineString' || geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\n    params.geometry = geojsonToArcGIS(geometry);\n    params.geometryType = geojsonTypeToArcGIS(geometry.type);\n    return params;\n  } // warn the user if we havn't found an appropriate object\n\n\n  warn('invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object');\n}\nexport function _getAttributionData(url, map) {\n  if (Support.cors) {\n    request(url, {}, Util.bind(function (error, attributions) {\n      if (error) {\n        return;\n      }\n\n      map._esriAttributions = [];\n\n      for (var c = 0; c < attributions.contributors.length; c++) {\n        var contributor = attributions.contributors[c];\n\n        for (var i = 0; i < contributor.coverageAreas.length; i++) {\n          var coverageArea = contributor.coverageAreas[i];\n          var southWest = latLng(coverageArea.bbox[0], coverageArea.bbox[1]);\n          var northEast = latLng(coverageArea.bbox[2], coverageArea.bbox[3]);\n\n          map._esriAttributions.push({\n            attribution: contributor.attribution,\n            score: coverageArea.score,\n            bounds: latLngBounds(southWest, northEast),\n            minZoom: coverageArea.zoomMin,\n            maxZoom: coverageArea.zoomMax\n          });\n        }\n      }\n\n      map._esriAttributions.sort(function (a, b) {\n        return b.score - a.score;\n      }); // pass the same argument as the map's 'moveend' event\n\n\n      var obj = {\n        target: map\n      };\n\n      _updateMapAttribution(obj);\n    }, this));\n  }\n}\nexport function _updateMapAttribution(evt) {\n  var map = evt.target;\n  var oldAttributions = map._esriAttributions;\n  if (!map || !map.attributionControl) return;\n\n  var attributionElement = map.attributionControl._container.querySelector('.esri-dynamic-attribution');\n\n  if (attributionElement && oldAttributions) {\n    var newAttributions = '';\n    var bounds = map.getBounds();\n    var wrappedBounds = latLngBounds(bounds.getSouthWest().wrap(), bounds.getNorthEast().wrap());\n    var zoom = map.getZoom();\n\n    for (var i = 0; i < oldAttributions.length; i++) {\n      var attribution = oldAttributions[i];\n      var text = attribution.attribution;\n\n      if (!newAttributions.match(text) && attribution.bounds.intersects(wrappedBounds) && zoom >= attribution.minZoom && zoom <= attribution.maxZoom) {\n        newAttributions += ', ' + text;\n      }\n    }\n\n    newAttributions = newAttributions.substr(2);\n    attributionElement.innerHTML = newAttributions;\n    attributionElement.style.maxWidth = calcAttributionWidth(map);\n    map.fire('attributionupdated', {\n      attribution: newAttributions\n    });\n  }\n} // for backwards compatibility\n\nexport { warn };\nexport var EsriUtil = {\n  warn: warn,\n  cleanUrl: cleanUrl,\n  getUrlParams: getUrlParams,\n  isArcgisOnline: isArcgisOnline,\n  geojsonTypeToArcGIS: geojsonTypeToArcGIS,\n  responseToFeatureCollection: responseToFeatureCollection,\n  geojsonToArcGIS: geojsonToArcGIS,\n  arcgisToGeoJSON: arcgisToGeoJSON,\n  boundsToExtent: boundsToExtent,\n  extentToBounds: extentToBounds,\n  calcAttributionWidth: calcAttributionWidth,\n  setEsriAttribution: setEsriAttribution,\n  _setGeometry: _setGeometry,\n  _getAttributionData: _getAttributionData,\n  _updateMapAttribution: _updateMapAttribution,\n  _findIdAttributeFromFeature: _findIdAttributeFromFeature,\n  _findIdAttributeFromResponse: _findIdAttributeFromResponse\n};\nexport default EsriUtil;","map":{"version":3,"names":["latLng","latLngBounds","LatLng","LatLngBounds","Util","DomUtil","GeoJSON","request","warn","options","Support","geojsonToArcGIS","g2a","arcgisToGeoJSON","a2g","BASE_LEAFLET_ATTRIBUTION_STRING","POWERED_BY_ESRI_ATTRIBUTION_STRING","geojson","idAttr","arcgis","extentToBounds","extent","xmin","ymin","xmax","ymax","sw","ne","boundsToExtent","bounds","getSouthWest","lng","lat","getNorthEast","spatialReference","wkid","knownFieldNames","_findIdAttributeFromResponse","response","result","objectIdFieldName","fields","j","length","type","name","match","_findIdAttributeFromFeature","feature","key","attributes","responseToFeatureCollection","idAttribute","objectIdField","features","results","count","featureCollection","i","push","cleanUrl","url","trim","getUrlParams","indexOf","requestParams","queryString","substring","split","JSON","parse","decodeURI","replace","isArcgisOnline","test","geojsonTypeToArcGIS","geoJsonType","arcgisGeometryType","calcAttributionWidth","map","getSize","x","attributionWidthOffset","setEsriAttribution","attributionControl","_esriAttributionLayerCount","_esriAttributionAddedOnce","hoverAttributionStyle","document","createElement","innerHTML","getElementsByTagName","appendChild","attributionStyle","on","e","_container","style","maxWidth","target","setPrefix","addClass","removeEsriAttribution","removeClass","_setGeometry","geometry","params","geometryType","getLatLng","coordinates","getLayers","toGeoJSON","_getAttributionData","cors","bind","error","attributions","_esriAttributions","c","contributors","contributor","coverageAreas","coverageArea","southWest","bbox","northEast","attribution","score","minZoom","zoomMin","maxZoom","zoomMax","sort","a","b","obj","_updateMapAttribution","evt","oldAttributions","attributionElement","querySelector","newAttributions","getBounds","wrappedBounds","wrap","zoom","getZoom","text","intersects","substr","fire","EsriUtil"],"sources":["C:/Users/Larix/Documents/Programmieren/ABSCHLUSS/wbs-final-box-fe/node_modules/esri-leaflet/src/Util.js"],"sourcesContent":["import { latLng, latLngBounds, LatLng, LatLngBounds, Util, DomUtil, GeoJSON } from 'leaflet';\r\nimport { request, warn } from './Request';\r\nimport { options } from './Options';\r\nimport { Support } from './Support';\r\n\r\nimport {\r\n  geojsonToArcGIS as g2a,\r\n  arcgisToGeoJSON as a2g\r\n} from '@terraformer/arcgis';\r\n\r\nvar BASE_LEAFLET_ATTRIBUTION_STRING = '<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>';\r\nvar POWERED_BY_ESRI_ATTRIBUTION_STRING = 'Powered by <a href=\"https://www.esri.com\">Esri</a>';\r\n\r\nexport function geojsonToArcGIS (geojson, idAttr) {\r\n  return g2a(geojson, idAttr);\r\n}\r\n\r\nexport function arcgisToGeoJSON (arcgis, idAttr) {\r\n  return a2g(arcgis, idAttr);\r\n}\r\n\r\n// convert an extent (ArcGIS) to LatLngBounds (Leaflet)\r\nexport function extentToBounds (extent) {\r\n  // \"NaN\" coordinates from ArcGIS Server indicate a null geometry\r\n  if (extent.xmin !== 'NaN' && extent.ymin !== 'NaN' && extent.xmax !== 'NaN' && extent.ymax !== 'NaN') {\r\n    var sw = latLng(extent.ymin, extent.xmin);\r\n    var ne = latLng(extent.ymax, extent.xmax);\r\n    return latLngBounds(sw, ne);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n// convert an LatLngBounds (Leaflet) to extent (ArcGIS)\r\nexport function boundsToExtent (bounds) {\r\n  bounds = latLngBounds(bounds);\r\n  return {\r\n    xmin: bounds.getSouthWest().lng,\r\n    ymin: bounds.getSouthWest().lat,\r\n    xmax: bounds.getNorthEast().lng,\r\n    ymax: bounds.getNorthEast().lat,\r\n    spatialReference: {\r\n      wkid: 4326\r\n    }\r\n  };\r\n}\r\n\r\nvar knownFieldNames = /^(OBJECTID|FID|OID|ID)$/i;\r\n\r\n// Attempts to find the ID Field from response\r\nexport function _findIdAttributeFromResponse (response) {\r\n  var result;\r\n\r\n  if (response.objectIdFieldName) {\r\n    // Find Id Field directly\r\n    result = response.objectIdFieldName;\r\n  } else if (response.fields) {\r\n    // Find ID Field based on field type\r\n    for (var j = 0; j <= response.fields.length - 1; j++) {\r\n      if (response.fields[j].type === 'esriFieldTypeOID') {\r\n        result = response.fields[j].name;\r\n        break;\r\n      }\r\n    }\r\n    if (!result) {\r\n      // If no field was marked as being the esriFieldTypeOID try well known field names\r\n      for (j = 0; j <= response.fields.length - 1; j++) {\r\n        if (response.fields[j].name.match(knownFieldNames)) {\r\n          result = response.fields[j].name;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n// This is the 'last' resort, find the Id field from the specified feature\r\nexport function _findIdAttributeFromFeature (feature) {\r\n  for (var key in feature.attributes) {\r\n    if (key.match(knownFieldNames)) {\r\n      return key;\r\n    }\r\n  }\r\n}\r\n\r\nexport function responseToFeatureCollection (response, idAttribute) {\r\n  var objectIdField;\r\n  var features = response.features || response.results;\r\n  var count = features && features.length;\r\n\r\n  if (idAttribute) {\r\n    objectIdField = idAttribute;\r\n  } else {\r\n    objectIdField = _findIdAttributeFromResponse(response);\r\n  }\r\n\r\n  var featureCollection = {\r\n    type: 'FeatureCollection',\r\n    features: []\r\n  };\r\n\r\n  if (count) {\r\n    for (var i = features.length - 1; i >= 0; i--) {\r\n      var feature = arcgisToGeoJSON(features[i], objectIdField || _findIdAttributeFromFeature(features[i]));\r\n      featureCollection.features.push(feature);\r\n    }\r\n  }\r\n\r\n  return featureCollection;\r\n}\r\n\r\n// trim url whitespace and add a trailing slash if needed\r\nexport function cleanUrl (url) {\r\n  // trim leading and trailing spaces, but not spaces inside the url\r\n  url = Util.trim(url);\r\n\r\n  // add a trailing slash to the url if the user omitted it\r\n  if (url[url.length - 1] !== '/') {\r\n    url += '/';\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\n/* Extract url params if any and store them in requestParams attribute.\r\n   Return the options params updated */\r\nexport function getUrlParams (options) {\r\n  if (options.url.indexOf('?') !== -1) {\r\n    options.requestParams = options.requestParams || {};\r\n    var queryString = options.url.substring(options.url.indexOf('?') + 1);\r\n    options.url = options.url.split('?')[0];\r\n    options.requestParams = JSON.parse('{\"' + decodeURI(queryString).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\r\n  }\r\n  options.url = cleanUrl(options.url.split('?')[0]);\r\n  return options;\r\n}\r\n\r\nexport function isArcgisOnline (url) {\r\n  /* hosted feature services support geojson as an output format\r\n  utility.arcgis.com services are proxied from a variety of ArcGIS Server vintages, and may not */\r\n  return (/^(?!.*utility\\.arcgis\\.com).*\\.arcgis\\.com.*FeatureServer/i).test(url);\r\n}\r\n\r\nexport function geojsonTypeToArcGIS (geoJsonType) {\r\n  var arcgisGeometryType;\r\n  switch (geoJsonType) {\r\n    case 'Point':\r\n      arcgisGeometryType = 'esriGeometryPoint';\r\n      break;\r\n    case 'MultiPoint':\r\n      arcgisGeometryType = 'esriGeometryMultipoint';\r\n      break;\r\n    case 'LineString':\r\n      arcgisGeometryType = 'esriGeometryPolyline';\r\n      break;\r\n    case 'MultiLineString':\r\n      arcgisGeometryType = 'esriGeometryPolyline';\r\n      break;\r\n    case 'Polygon':\r\n      arcgisGeometryType = 'esriGeometryPolygon';\r\n      break;\r\n    case 'MultiPolygon':\r\n      arcgisGeometryType = 'esriGeometryPolygon';\r\n      break;\r\n  }\r\n\r\n  return arcgisGeometryType;\r\n}\r\n\r\nexport function calcAttributionWidth (map) {\r\n  // either crop at 55px or user defined buffer\r\n  return (map.getSize().x - options.attributionWidthOffset) + 'px';\r\n}\r\n\r\nexport function setEsriAttribution (map) {\r\n  if (!map.attributionControl) {\r\n    return;\r\n  }\r\n\r\n  if (!map.attributionControl._esriAttributionLayerCount) {\r\n    map.attributionControl._esriAttributionLayerCount = 0;\r\n  }\r\n\r\n  if (map.attributionControl._esriAttributionLayerCount === 0) {\r\n    // Dynamically creating the CSS rules, only run this once per page load:\r\n    if (!map.attributionControl._esriAttributionAddedOnce) {\r\n      var hoverAttributionStyle = document.createElement('style');\r\n      hoverAttributionStyle.type = 'text/css';\r\n      hoverAttributionStyle.innerHTML = '.esri-truncated-attribution:hover {' +\r\n        'white-space: normal;' +\r\n      '}';\r\n      document.getElementsByTagName('head')[0].appendChild(hoverAttributionStyle);\r\n\r\n      // define a new css class in JS to trim attribution into a single line\r\n      var attributionStyle = document.createElement('style');\r\n      attributionStyle.type = 'text/css';\r\n      attributionStyle.innerHTML = '.esri-truncated-attribution {' +\r\n        'vertical-align: -3px;' +\r\n        'white-space: nowrap;' +\r\n        'overflow: hidden;' +\r\n        'text-overflow: ellipsis;' +\r\n        'display: inline-block;' +\r\n        'transition: 0s white-space;' +\r\n        'transition-delay: 1s;' +\r\n        'max-width: ' + calcAttributionWidth(map) + ';' +\r\n      '}';\r\n      document.getElementsByTagName('head')[0].appendChild(attributionStyle);\r\n\r\n      // update the width used to truncate when the map itself is resized\r\n      map.on('resize', function (e) {\r\n        if (map.attributionControl) {\r\n          map.attributionControl._container.style.maxWidth = calcAttributionWidth(e.target);\r\n        }\r\n      });\r\n\r\n      map.attributionControl._esriAttributionAddedOnce = true;\r\n    }\r\n\r\n    map.attributionControl.setPrefix(BASE_LEAFLET_ATTRIBUTION_STRING + ' | ' + POWERED_BY_ESRI_ATTRIBUTION_STRING);\r\n    DomUtil.addClass(map.attributionControl._container, 'esri-truncated-attribution:hover');\r\n    DomUtil.addClass(map.attributionControl._container, 'esri-truncated-attribution');\r\n  }\r\n\r\n  // Track the number of esri-leaflet layers that are on the map so we can know when we can remove the attribution (below in removeEsriAttribution)\r\n  map.attributionControl._esriAttributionLayerCount = map.attributionControl._esriAttributionLayerCount + 1;\r\n}\r\n\r\nexport function removeEsriAttribution (map) {\r\n  if (!map.attributionControl) {\r\n    return;\r\n  }\r\n\r\n  // Only remove the attribution if we're about to remove the LAST esri-leaflet layer (_esriAttributionLayerCount)\r\n  if (map.attributionControl._esriAttributionLayerCount && map.attributionControl._esriAttributionLayerCount === 1) {\r\n    map.attributionControl.setPrefix(BASE_LEAFLET_ATTRIBUTION_STRING);\r\n    DomUtil.removeClass(map.attributionControl._container, 'esri-truncated-attribution:hover');\r\n    DomUtil.removeClass(map.attributionControl._container, 'esri-truncated-attribution');\r\n  }\r\n  map.attributionControl._esriAttributionLayerCount = map.attributionControl._esriAttributionLayerCount - 1;\r\n}\r\n\r\nexport function _setGeometry (geometry) {\r\n  var params = {\r\n    geometry: null,\r\n    geometryType: null\r\n  };\r\n\r\n  // convert bounds to extent and finish\r\n  if (geometry instanceof LatLngBounds) {\r\n    // set geometry + geometryType\r\n    params.geometry = boundsToExtent(geometry);\r\n    params.geometryType = 'esriGeometryEnvelope';\r\n    return params;\r\n  }\r\n\r\n  // convert L.Marker > L.LatLng\r\n  if (geometry.getLatLng) {\r\n    geometry = geometry.getLatLng();\r\n  }\r\n\r\n  // convert L.LatLng to a geojson point and continue;\r\n  if (geometry instanceof LatLng) {\r\n    geometry = {\r\n      type: 'Point',\r\n      coordinates: [geometry.lng, geometry.lat]\r\n    };\r\n  }\r\n\r\n  // handle L.GeoJSON, pull out the first geometry\r\n  if (geometry instanceof GeoJSON) {\r\n    // reassign geometry to the GeoJSON value  (we are assuming that only one feature is present)\r\n    geometry = geometry.getLayers()[0].feature.geometry;\r\n    params.geometry = geojsonToArcGIS(geometry);\r\n    params.geometryType = geojsonTypeToArcGIS(geometry.type);\r\n  }\r\n\r\n  // Handle L.Polyline and L.Polygon\r\n  if (geometry.toGeoJSON) {\r\n    geometry = geometry.toGeoJSON();\r\n  }\r\n\r\n  // handle GeoJSON feature by pulling out the geometry\r\n  if (geometry.type === 'Feature') {\r\n    // get the geometry of the geojson feature\r\n    geometry = geometry.geometry;\r\n  }\r\n\r\n  // confirm that our GeoJSON is a point, line or polygon\r\n  if (geometry.type === 'Point' || geometry.type === 'LineString' || geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\r\n    params.geometry = geojsonToArcGIS(geometry);\r\n    params.geometryType = geojsonTypeToArcGIS(geometry.type);\r\n    return params;\r\n  }\r\n\r\n  // warn the user if we havn't found an appropriate object\r\n  warn('invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object');\r\n}\r\n\r\nexport function _getAttributionData (url, map) {\r\n  if (Support.cors) {\r\n    request(url, {}, Util.bind(function (error, attributions) {\r\n      if (error) { return; }\r\n      map._esriAttributions = [];\r\n      for (var c = 0; c < attributions.contributors.length; c++) {\r\n        var contributor = attributions.contributors[c];\r\n\r\n        for (var i = 0; i < contributor.coverageAreas.length; i++) {\r\n          var coverageArea = contributor.coverageAreas[i];\r\n          var southWest = latLng(coverageArea.bbox[0], coverageArea.bbox[1]);\r\n          var northEast = latLng(coverageArea.bbox[2], coverageArea.bbox[3]);\r\n          map._esriAttributions.push({\r\n            attribution: contributor.attribution,\r\n            score: coverageArea.score,\r\n            bounds: latLngBounds(southWest, northEast),\r\n            minZoom: coverageArea.zoomMin,\r\n            maxZoom: coverageArea.zoomMax\r\n          });\r\n        }\r\n      }\r\n\r\n      map._esriAttributions.sort(function (a, b) {\r\n        return b.score - a.score;\r\n      });\r\n\r\n      // pass the same argument as the map's 'moveend' event\r\n      var obj = { target: map };\r\n      _updateMapAttribution(obj);\r\n    }, this));\r\n  }\r\n}\r\n\r\nexport function _updateMapAttribution (evt) {\r\n  var map = evt.target;\r\n  var oldAttributions = map._esriAttributions;\r\n\r\n  if (!map || !map.attributionControl) return;\r\n\r\n  var attributionElement = map.attributionControl._container.querySelector('.esri-dynamic-attribution');\r\n\r\n  if (attributionElement && oldAttributions) {\r\n    var newAttributions = '';\r\n    var bounds = map.getBounds();\r\n    var wrappedBounds = latLngBounds(\r\n      bounds.getSouthWest().wrap(),\r\n      bounds.getNorthEast().wrap()\r\n    );\r\n    var zoom = map.getZoom();\r\n\r\n    for (var i = 0; i < oldAttributions.length; i++) {\r\n      var attribution = oldAttributions[i];\r\n      var text = attribution.attribution;\r\n\r\n      if (!newAttributions.match(text) && attribution.bounds.intersects(wrappedBounds) && zoom >= attribution.minZoom && zoom <= attribution.maxZoom) {\r\n        newAttributions += (', ' + text);\r\n      }\r\n    }\r\n\r\n    newAttributions = newAttributions.substr(2);\r\n    attributionElement.innerHTML = newAttributions;\r\n    attributionElement.style.maxWidth = calcAttributionWidth(map);\r\n\r\n    map.fire('attributionupdated', {\r\n      attribution: newAttributions\r\n    });\r\n  }\r\n}\r\n\r\n// for backwards compatibility\r\nexport { warn };\r\n\r\nexport var EsriUtil = {\r\n  warn: warn,\r\n  cleanUrl: cleanUrl,\r\n  getUrlParams: getUrlParams,\r\n  isArcgisOnline: isArcgisOnline,\r\n  geojsonTypeToArcGIS: geojsonTypeToArcGIS,\r\n  responseToFeatureCollection: responseToFeatureCollection,\r\n  geojsonToArcGIS: geojsonToArcGIS,\r\n  arcgisToGeoJSON: arcgisToGeoJSON,\r\n  boundsToExtent: boundsToExtent,\r\n  extentToBounds: extentToBounds,\r\n  calcAttributionWidth: calcAttributionWidth,\r\n  setEsriAttribution: setEsriAttribution,\r\n  _setGeometry: _setGeometry,\r\n  _getAttributionData: _getAttributionData,\r\n  _updateMapAttribution: _updateMapAttribution,\r\n  _findIdAttributeFromFeature: _findIdAttributeFromFeature,\r\n  _findIdAttributeFromResponse: _findIdAttributeFromResponse\r\n};\r\n\r\nexport default EsriUtil;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}